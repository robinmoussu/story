digraph G {
    compound=true;
    subgraph cluster0 {
        label = introduction;
        start [shape=Mdiamond];
        elf;
        dwarf;
        human;

        elf [label="- elf -
            goal: studie dragon
            and report your observations
            to a local priest"]
        human [label="- human -
            goal: kill a dragon and
            bring a proof of is death
            to the local lord"]
        dwarf [label="- dwarf -
            goal: kill a dragon to
            get his treasure, then
            continue on the road"]
        start -> dwarf, elf, human;
    }

    subgraph cluster1 {
        label = village
        village;
        village_morning;
        children;
        
        subgraph cluster5 {
            label = blacksmith;
            blacksmith;
            blacksmith_sword;
            blacksmith_dwarf;
            blacksmith_nothing;
        }

        subgraph cluster6 {
            label = tavern;
            tavern;
            rumour;
            tavern_drink;
        }

        village -> blacksmith, tavern;
        village -> children [label="if human"];
        children -> tavern_drink, blacksmith;

        blacksmith -> blacksmith_dwarf [label="if dwarf"]
        blacksmith_dwarf -> blacksmith_sword [label="if need weapon"];
        blacksmith_dwarf -> village [label="else"];
        blacksmith -> blacksmith_nothing [label="else"];

        blacksmith_sword -> village;
        blacksmith_nothing -> village;

        tavern -> rumour,tavern_drink;
        tavern_drink -> village_morning;
        rumour -> village_morning;
    }

    subgraph cluster2 {
        label = west;
        field;
        field_2;
        farmers;

        subgraph cluster7 {
            label=chapel;
            chapel;
            priest;
            priest_elf;
            priest_quest;
            theologie [shape=Mdiamond];
        }

        field -> farmers;
        field -> chapel;
        field_2 -> farmers;
        field_2 -> chapel;
        chapel -> priest;
        priest -> priest_elf [label="if elf"];
        priest_elf -> theologie [label="if Ã©caille de dragon"];
        priest_elf -> priest_quest [label="else"];
    }

    subgraph cluster3 {
        label = forest;
        edge_of_the_wood;
        dwarf_edge_of_the_wood;
        clearing;
        clearing_1;
        clearing_2;
        natural_basin;
        track;
        river;
        old_tree;
        lost [shape=Mdiamond];
        lumberjack;

        lumberjack -> dwarf_edge_of_the_wood [label="now, if dwarf"];
        lumberjack -> clearing;
        lumberjack -> track;
        clearing -> clearing_2 [label="if second time"];
        clearing -> clearing_1 [label="else"];
        clearing_1 -> river, old_tree;
        clearing_2 -> natural_basin [label="now if elf"];
        clearing_2 -> lost [label="else"];
        natural_basin -> track;
        river -> lumberjack, clearing;
        old_tree -> clearing;
    }

    subgraph cluster4 {
        label = est;
        dragon;
        dragon_battle;
        dragon_studie;
        dragon_studie_2;
        road;
        elf_road [shape=Mdiamond];
        gobelins;
        treasure;
        dwarf_victory [shape=Mdiamond];
        dwarf_death [shape=Mdiamond];
        battle_death [shape=Mdiamond];

        dragon -> dragon_battle, dragon_studie;
        dragon_battle -> village [label=else];
        dragon_battle -> treasure [label="if dwarf"];
        dragon_studie -> battle_death [label="now, if not elf"];
    }

    subgraph cluster8 {
        label=castel;
        castel_entrance;
        courtyart;
        lord [shape=Mdiamond];

        castel_entrance -> courtyart [label="if human"];
        courtyart -> lord [label="now if have killed dragon"];
    }

    castel_entrance -> field_2 [label="else"];
    courtyart -> field, village, edge_of_the_wood;

    human -> courtyart;
    elf -> edge_of_the_wood;
    dwarf -> field;

    field -> edge_of_the_wood, village, castel_entrance;
    edge_of_the_wood -> clearing;
    edge_of_the_wood -> dwarf_edge_of_the_wood [label="now, if dwarf"];

    dwarf_edge_of_the_wood -> lost;

    track -> dragon;
    dragon_studie -> dragon_studie_2;
    dragon_studie_2 -> village, elf_road;

    treasure -> village, road;
    road -> gobelins [label="if treasure and want to continue your journey far away"];
    road -> gobelins [label="else if dwarf"];
    road -> edge_of_the_wood, field_2;
    gobelins -> dwarf_victory [label="if weapon"];
    gobelins -> dwarf_death [label="else"];

    village_morning -> field, lumberjack, road;

    chapel -> edge_of_the_wood;
    farmers -> lumberjack;
    priest_quest -> edge_of_the_wood;
    lumberjack -> chapel;
}

